{
  "type": "excalidraw",
  "version": 2,
  "source": "https://app.excalidraw.com",
  "elements": [
    {
      "id": "iUApGzdPyHm0xwcVitqwr",
      "type": "rectangle",
      "x": 245.82723999023438,
      "y": -25.13634490966797,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e5ff00",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 1561224622,
      "version": 51,
      "versionNonce": 694556764,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "UIH9oACN0rk4iUj59tQFl"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "a7"
    },
    {
      "id": "UIH9oACN0rk4iUj59tQFl",
      "type": "text",
      "x": 426.9522399902344,
      "y": 29.36365509033203,
      "width": 93.75,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1037139950,
      "version": 33,
      "versionNonce": 434842468,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Commands",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "iUApGzdPyHm0xwcVitqwr",
      "originalText": "Commands",
      "lineHeight": 1.2,
      "index": "a8",
      "autoResize": true
    },
    {
      "id": "pk7_S7lYlIt0IPCatlqyk",
      "type": "rectangle",
      "x": 833.8272399902344,
      "y": -25.13634490966797,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#0085ff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 832452846,
      "version": 84,
      "versionNonce": 775597276,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "177c8jvWGoHEv4qXATiZ-"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "a9"
    },
    {
      "id": "177c8jvWGoHEv4qXATiZ-",
      "type": "text",
      "x": 1026.6709899902344,
      "y": 29.36365509033203,
      "width": 70.3125,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1870981934,
      "version": 83,
      "versionNonce": 1773674212,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Events",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "pk7_S7lYlIt0IPCatlqyk",
      "originalText": "Events",
      "lineHeight": 1.2,
      "index": "aA",
      "autoResize": true
    },
    {
      "id": "LMyqKhEW3KdJOgmZXu-KO",
      "type": "text",
      "x": 239.82723999023438,
      "y": 160.86365509033203,
      "width": 492.1875,
      "height": 192,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1181871278,
      "version": 205,
      "versionNonce": 1149808988,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Have 1+ Creators and 1 Handler\nAre \"Active Aggressive\" - expect something\nto happen.\n\n- CreateOrder\n- DeactivateAccount\n- PostScore\n",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 187,
      "containerId": null,
      "originalText": "Have 1+ Creators and 1 Handler\nAre \"Active Aggressive\" - expect something\nto happen.\n\n- CreateOrder\n- DeactivateAccount\n- PostScore\n",
      "lineHeight": 1.2,
      "index": "aB",
      "autoResize": true
    },
    {
      "id": "F9M9jLeoRlGPQVWeqkAmH",
      "type": "text",
      "x": 870.8272399902344,
      "y": 152.86365509033203,
      "width": 562.5,
      "height": 192,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 110664878,
      "version": 189,
      "versionNonce": 714777188,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Have 1+ Creators and 0+ Handler\nAre \"Passive\"\nIndicate something happened.\nAn event is something that happened in the past.\n\n- OrderCreated\n- AccountDeactivated\n- ScorePosted",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 187,
      "containerId": null,
      "originalText": "Have 1+ Creators and 0+ Handler\nAre \"Passive\"\nIndicate something happened.\nAn event is something that happened in the past.\n\n- OrderCreated\n- AccountDeactivated\n- ScorePosted",
      "lineHeight": 1.2,
      "index": "aC",
      "autoResize": true
    },
    {
      "id": "SXEihtSNv9KFI_OuqSehV",
      "type": "text",
      "x": 211.82723999023438,
      "y": 469.86365509033203,
      "width": 1429.6875,
      "height": 168,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e5ff00",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 132796082,
      "version": 557,
      "versionNonce": 1537353180,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Commands are cause and effect. When we issue a command we are saying that something must happen. We indicate what happened\nby creating an event.\n    - CreateOrder => (OrderCreated | OrderCreationFailed)\n    - The assumption is this will be done asynchronously.\n    - If the command is created from an Request/Reply world, like HTTP, you have nothing to return.\n        - POST /orders -> CreateOrder -> OrderCreated -> 200 Ok?\n        - POST /orders -> CreateOrder -> (Order, OrderCreated) -> 200 Ok (Order)",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 163,
      "containerId": null,
      "originalText": "Commands are cause and effect. When we issue a command we are saying that something must happen. We indicate what happened\nby creating an event.\n    - CreateOrder => (OrderCreated | OrderCreationFailed)\n    - The assumption is this will be done asynchronously.\n    - If the command is created from an Request/Reply world, like HTTP, you have nothing to return.\n        - POST /orders -> CreateOrder -> OrderCreated -> 200 Ok?\n        - POST /orders -> CreateOrder -> (Order, OrderCreated) -> 200 Ok (Order)",
      "lineHeight": 1.2,
      "index": "aD",
      "autoResize": true
    },
    {
      "id": "8-BL7s0pmn_NYO8aoElhs",
      "type": "rectangle",
      "x": 40.827239990234375,
      "y": 744.863655090332,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e5ff00",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 1237335790,
      "version": 118,
      "versionNonce": 1130411492,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "j6yaOpmME0XkxwkrrPOTx"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "aE"
    },
    {
      "id": "j6yaOpmME0XkxwkrrPOTx",
      "type": "text",
      "x": 204.37411499023438,
      "y": 799.363655090332,
      "width": 128.90625,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 24523054,
      "version": 111,
      "versionNonce": 681118300,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "CreateOrder",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "8-BL7s0pmn_NYO8aoElhs",
      "originalText": "CreateOrder",
      "lineHeight": 1.2,
      "index": "aF",
      "autoResize": true
    },
    {
      "id": "VI6BGO8wvz7mc00IfUi0f",
      "type": "rectangle",
      "x": 1163.8272399902344,
      "y": 736.863655090332,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#0085ff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 1014780594,
      "version": 143,
      "versionNonce": 286808420,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "sNyWTZ--2-lSfJ7nkR8m9"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "aG"
    },
    {
      "id": "sNyWTZ--2-lSfJ7nkR8m9",
      "type": "text",
      "x": 1321.5147399902344,
      "y": 791.363655090332,
      "width": 140.625,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1585654898,
      "version": 154,
      "versionNonce": 1849646812,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "OrderCreated",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "VI6BGO8wvz7mc00IfUi0f",
      "originalText": "OrderCreated",
      "lineHeight": 1.2,
      "index": "aH",
      "autoResize": true
    },
    {
      "id": "XGVexNHCunEQnarmPlA7L",
      "type": "rectangle",
      "x": 587.8272399902344,
      "y": 741.863655090332,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 868246190,
      "version": 166,
      "versionNonce": 521112804,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "rwsJFJGkjsrSXwJxQVurQ"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "aI"
    },
    {
      "id": "rwsJFJGkjsrSXwJxQVurQ",
      "type": "text",
      "x": 768.9522399902344,
      "y": 796.363655090332,
      "width": 93.75,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1195105518,
      "version": 173,
      "versionNonce": 1160192860,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Policies",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "XGVexNHCunEQnarmPlA7L",
      "originalText": "Policies",
      "lineHeight": 1.2,
      "index": "aJ",
      "autoResize": true
    },
    {
      "id": "BFGE59w8209kusUjty6Ct",
      "type": "text",
      "x": 676.8272399902344,
      "y": 898.863655090332,
      "width": 328.125,
      "height": 120,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1209541806,
      "version": 142,
      "versionNonce": 1590972516,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "The \"Business Rules\"\n- Customer Has Good Standing\n- Items in Inventory\n- We ship to that location\n- etc.",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 115,
      "containerId": null,
      "originalText": "The \"Business Rules\"\n- Customer Has Good Standing\n- Items in Inventory\n- We ship to that location\n- etc.",
      "lineHeight": 1.2,
      "index": "aK",
      "autoResize": true
    },
    {
      "id": "K6UCuqv_u5YCfp3kxJZk3",
      "type": "rectangle",
      "x": 1168.8272399902344,
      "y": 901.863655090332,
      "width": 456,
      "height": 133,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#0085ff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "seed": 1932847662,
      "version": 166,
      "versionNonce": 1671583708,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "nXq_gR9OqLTjP40tzPZz1"
        }
      ],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "index": "aL"
    },
    {
      "id": "nXq_gR9OqLTjP40tzPZz1",
      "type": "text",
      "x": 1320.6553649902344,
      "y": 956.363655090332,
      "width": 152.34375,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1711982318,
      "version": 193,
      "versionNonce": 1614062564,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "OrderRejected",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 19,
      "containerId": "K6UCuqv_u5YCfp3kxJZk3",
      "originalText": "OrderRejected",
      "lineHeight": 1.2,
      "index": "aM",
      "autoResize": true
    },
    {
      "id": "xcoHbZYnOZshtEduAZETJ",
      "type": "text",
      "x": 130.82723999023438,
      "y": 1129.863655090332,
      "width": 1371.09375,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1880669426,
      "version": 168,
      "versionNonce": 1707277404,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Good Practice - Whenever a command is processed always create an event. Even if you don't have a use case for it yet.",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 19,
      "containerId": null,
      "originalText": "Good Practice - Whenever a command is processed always create an event. Even if you don't have a use case for it yet.",
      "lineHeight": 1.2,
      "index": "aN",
      "autoResize": true
    },
    {
      "type": "text",
      "version": 79,
      "versionNonce": 155092836,
      "isDeleted": false,
      "id": "qAn-MbiO5iZkZngXUwPiJ",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "angle": 0,
      "x": 234.82723999023438,
      "y": -255.73634490966796,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "width": 536.71875,
      "height": 137.40799999999987,
      "seed": 452236846,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "fontSize": 114.50666666666656,
      "fontFamily": 3,
      "text": "Messages",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Messages",
      "lineHeight": 1.2,
      "baseline": 110,
      "index": "aO",
      "autoResize": true
    },
    {
      "id": "JNWEz8fW6efHtTZNhPUTX",
      "type": "text",
      "x": 247.82723999023438,
      "y": -106.53634490966797,
      "width": 1617.1875,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 956281650,
      "version": 262,
      "versionNonce": 358289628,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Let's bracket the thought of external systems for a while. A good way to learn that stuff is applying this internally in your application.",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 19,
      "containerId": null,
      "originalText": "Let's bracket the thought of external systems for a while. A good way to learn that stuff is applying this internally in your application.",
      "lineHeight": 1.2,
      "index": "aP",
      "autoResize": true
    },
    {
      "id": "aZTPgNQfG5pZzaZXTjOLr",
      "type": "text",
      "x": 129.82723999023438,
      "y": 1268.863655090332,
      "width": 1464.84375,
      "height": 600,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1054007410,
      "version": 1800,
      "versionNonce": 1312815844,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Messages are \"operators\" - They indicate what action to perform (with commands) or what happened (Events).\nMessages often need \"operands\" - what that operator (operation) should be performed on.\n    - In the expression \"2 + 5\", The plus sign (Addition Operator) needs two Operands (2 and 5)\n\nThe operands are \"discovered\" by looking at the policies. Once the policies are applied, we can decide the event.\n\nFor example, with the policies above (Customer has good standing, items in inventory, we ship to that location)\nwe are saying our system has the ability to enforce each of those policies, and if they all \"pass\" we can say OrderCreated.\n\nIf our system doesn't have the stuff (state-process) to enforce those, we could:\n    - Do synchronous RPC calls to the services that can enforce those.\n        - e.g. Check the \"Customer\" service, Check the \"Inventory Service\", Check \"Shipping Service\"\n            - \"Yes, good customer, yes, we have that in inventory, yes we ship there\"\n                We could then say \"Ok, looks good\", now I'm going to send a Command to each of those to:\n                    - Charge the Customer \n                    - Adjust Inventory\n                    - Arrange Shipping\n        - We are back in Distributed Transaction land, and you are going to fail. Hard.\n    - Instead we lean in to \"OrderCreated\" - this isn't the final step. Things need to happen, it needs to be processed, etc.\n        - In other words, it isn't an \"OrderShipped\" event.\n    - An Event is a historical record. You are saying \"At the time this command was received:\n        - I was dealing with this customer (operand)\n        - I was dealing with this list of products (operand)\n\n",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 595,
      "containerId": null,
      "originalText": "Messages are \"operators\" - They indicate what action to perform (with commands) or what happened (Events).\nMessages often need \"operands\" - what that operator (operation) should be performed on.\n    - In the expression \"2 + 5\", The plus sign (Addition Operator) needs two Operands (2 and 5)\n\nThe operands are \"discovered\" by looking at the policies. Once the policies are applied, we can decide the event.\n\nFor example, with the policies above (Customer has good standing, items in inventory, we ship to that location)\nwe are saying our system has the ability to enforce each of those policies, and if they all \"pass\" we can say OrderCreated.\n\nIf our system doesn't have the stuff (state-process) to enforce those, we could:\n    - Do synchronous RPC calls to the services that can enforce those.\n        - e.g. Check the \"Customer\" service, Check the \"Inventory Service\", Check \"Shipping Service\"\n            - \"Yes, good customer, yes, we have that in inventory, yes we ship there\"\n                We could then say \"Ok, looks good\", now I'm going to send a Command to each of those to:\n                    - Charge the Customer \n                    - Adjust Inventory\n                    - Arrange Shipping\n        - We are back in Distributed Transaction land, and you are going to fail. Hard.\n    - Instead we lean in to \"OrderCreated\" - this isn't the final step. Things need to happen, it needs to be processed, etc.\n        - In other words, it isn't an \"OrderShipped\" event.\n    - An Event is a historical record. You are saying \"At the time this command was received:\n        - I was dealing with this customer (operand)\n        - I was dealing with this list of products (operand)\n\n",
      "lineHeight": 1.2,
      "index": "aQ",
      "autoResize": true
    },
    {
      "id": "-TzYMXUamLWwbManC_OUi",
      "type": "text",
      "x": -338.1727600097656,
      "y": 1584.863655090332,
      "width": 457.03125,
      "height": 24,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1732303086,
      "version": 73,
      "versionNonce": 1774648932,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": "https://www.enterpriseintegrationpatterns.com/ramblings/18_starbucks.html",
      "locked": false,
      "text": "Starbucks Does Not Use Two-Phase Commit",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 19,
      "containerId": null,
      "originalText": "Starbucks Does Not Use Two-Phase Commit",
      "lineHeight": 1.2,
      "index": "aS",
      "autoResize": true
    },
    {
      "id": "Tk4ciMr_73qHzFVP6pIVO",
      "type": "text",
      "x": 152.82723999023438,
      "y": 1919.863655090332,
      "width": 1453.125,
      "height": 240,
      "angle": 0,
      "strokeColor": "#e03131",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 668126126,
      "version": 996,
      "versionNonce": 955877852,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "Note: Some commands must be processed synchronously. A user logging in/out is an example.\n      Sometimes you do need to have a meeting. Often it could have been an email (asynchronous)\n      Sometimes you do need to call someone on the phone. Often it could have been a text.\n      Do not confuse asynchronous with being (necessarily) slow. \n      HTTP is not an asynchronous messaging protocol. It is request/response. \n      The ideologies of transactional consistency and HTTP request response make us think things like:\n        - If a user adds a vehicle to their insurance policy, I cannot send a response until it is actually on their policy.\n        - This is confusing \"Creating an Order\" with \"Shipping an Order\"\n        - You can only do those things with local transactions. (because there are no reliable distributed transactions)\n        - Again, the stateless nature of HTTP really seems to highlight this. Make it stateful (web sockets, etc.)",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 235,
      "containerId": null,
      "originalText": "Note: Some commands must be processed synchronously. A user logging in/out is an example.\n      Sometimes you do need to have a meeting. Often it could have been an email (asynchronous)\n      Sometimes you do need to call someone on the phone. Often it could have been a text.\n      Do not confuse asynchronous with being (necessarily) slow. \n      HTTP is not an asynchronous messaging protocol. It is request/response. \n      The ideologies of transactional consistency and HTTP request response make us think things like:\n        - If a user adds a vehicle to their insurance policy, I cannot send a response until it is actually on their policy.\n        - This is confusing \"Creating an Order\" with \"Shipping an Order\"\n        - You can only do those things with local transactions. (because there are no reliable distributed transactions)\n        - Again, the stateless nature of HTTP really seems to highlight this. Make it stateful (web sockets, etc.)",
      "lineHeight": 1.2,
      "index": "aT",
      "autoResize": true
    },
    {
      "id": "wWNTIrI2hsIgAtRIHiSno",
      "type": "text",
      "x": 1343.8272399902344,
      "y": 1835.863655090332,
      "width": 362.53973388671875,
      "height": 100,
      "angle": 0,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 93328174,
      "version": 151,
      "versionNonce": 346132964,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "\"Ideology are those things\nthat we think are true\nbut are just beliefs\"\n- can't remember where I heard this.",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 93,
      "containerId": null,
      "originalText": "\"Ideology are those things\nthat we think are true\nbut are just beliefs\"\n- can't remember where I heard this.",
      "lineHeight": 1.25,
      "index": "aU",
      "autoResize": true
    },
    {
      "id": "dnryTEV89Kt93ADfoslK9",
      "type": "text",
      "x": 113.82723999023438,
      "y": 2215.863655090332,
      "width": 1593.75,
      "height": 3288,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#c773c7",
      "fillStyle": "solid",
      "strokeWidth": 4,
      "strokeStyle": "solid",
      "roughness": 0,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "seed": 1618762482,
      "version": 6592,
      "versionNonce": 761523804,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1764550693551,
      "link": null,
      "locked": false,
      "text": "In the ordering scenario above we are saying \"Within my world (bounded context) I'm responsible for users placing orders.\nI need some operands to do that. The customers, some inventory, etc. When an order is placed, my service will OWN that order.\n\nIn other words, some data (operands) that you don't own will end up being operated on to create something you do own.\n\n\nOrderCreated (Operation)\n    - Id: \"d80603ef-fb7c-4416-bab5-7f0a3ba0d997\"\n    - Placed: 2023-10-17 8:24:17 AM\n    - Customer: bob-smith\n    - Items: [ {qty: 3, sku: eggs, price: $2}, {qty: 2, sku: bread, price: $1.50}]\n    - Subtotal: $12\n\n\nWe KNOW that this is going to have to turn into an \"OrderShipped\" (or an error).\n\nWe could issue COMMANDS to other services (remember commands have one handler), wait for some kind of response (Event)\nfrom each one, and that is an \"orchestrator\" and it is super tightly coupled.\n\nThis is where we go back to our policy, which says \"An OrderCreated becomes an OrderShipped When\":\n    - The Order Customer Is Approved (sounds like an event!)\n    - The inventory is reconciled \n    - The shipping is arranged\n    - An OrderId is assigned\n    - Etc. etc.\n\nThis is a \"Saga\" - like Game of Thrones, lots of interweaving story lines, all leading up to a (hopefully better) ending.\n\nWhat is our responsibility as the \"Order taking bounded context\"?\n    - Put an event out there - and trust that eventually we will receive the set of events that mean we can call this an \"Order\".\n\n\nSo we publish an \"OrderCreated\" event, and other services can:\n    - Work on it in parallel. \n    - Work on it sequentially.\n    - Be added in without us knowing.\n\nNote: Sagas are sometimes time constrained. You shouldn't start making the TV show until all the books are written. (forced metaphor).\n\n\nWe let each of the participating services (and we shouldn't know who they are) do their own work and state management.\n- This means that they *each* have at least two handlers.\n    - The \"Local Transaction\"\n        - \"I received this event so I am going to change my state thusly\":\n            - \"I am inventory. When an order is created, I will apply my policies, and if good, update the inventory\"\n            - \"I am the billing service. When an order is created I will charge the customer\"\n            - etc. etc.\n        - To orchestrate/sequence the application of these things, they may not all (and probably won't) respond to the \n          \"OrderCreated\" event. For example, you might decide that we aren't going to adjust inventory until the credit card is charged,\n          or vice-versa. \n            - The Inventory Service listens for a \"CustomerOrderCharged\" event. \n                (keep in mind all of this can and will change and our bounded context does not care. Loose Coupling FTW!)\n    - The \"Compensating Activity\"\n        - If there is a rejection from any of the participating services, each service will have to \"backout\" their local transaction.\n        - \"Dang, I already took the items out of inventory, and just heard (Event) that the credit card company rejected the payment\"\n            - Put it \"back\" in inventory.\n            - Sounds easy, and often is, but what if between when the order was placed and when it was rejected, we had other orders\n              we had to reject because of inadequate inventory?\n                - This is \"computer programming\". \n                - Some Ways To Handle This:\n                    - \"Lock\" the data until you get the go-ahead. Probably not sustainable for Shared data (like inventory) but\n                       for user-associated data, it often is. (e.g. I am in the process of changing this insurance policy by adding a \n                        vehicle. I cannot make any other changes to this until it is approved\")\n                    - Re-sequence processing of events. \n                        - \"I just got an order for more eggs, but this other outstanding order took the last dozen. I should know at\n                          X time if the order completed, I will defer this new order until then\" (this is why sagas have time limits)\n                    - Related: you can just retry X mins/seconds/hours in the future. Read: Amazon cancelling an order.\n\nWhat about \"Consistency\"?\n    - The inventory system gets an OrderCreated, and the prices have changed since the order was placed.\n    - Old Skool Transactional Consistency would say \"FAIL!\"\n    - We can have a \"Policy\" for this, for example:\n        - If the price change is within a certain \"window\", we will honor it. \n            - We'd need to know somehow what version of the price list they are working from. \"Versioned Editions\"\n        - If the price promised on the order is lower than the current price, we will honor it. \n        - If the price change on the order is lower than the current price, AND the customer is a \"VIP\", we will honor it.\n\n\n\n\nVersioned Editions:\n\n\"My local reference data for the product with the SKU 'eggs'\" says they cost $1.99 a dozen.\n\nHow will I get \"updates\" if that is mutable data? \n\nOne way:\n    I get a \"document\" event: \n        On Day 1: \n            Operator: \"InventoryItem\" (weird, huh)\n                Operands:\n                    SKU: 'eggs'\n                    Version: 1\n                    price: 1.99\n        On Day 2:\n            Operator: \"InventoryItem\" (weird, huh)\n                Operands:\n                    SKU: 'eggs'\n                    Version: 2\n                    price: 2.08\n\n\nThe operand for anything having to do with IventoryItems is now a \"composite key\" of the SKU and the Version.\n\nThis can get crazy. These are \"State Carried Messages\" - and don't sound like events. \n    - Note: in Event Streaming (e.g. Kafka) these CAN be in a topic that can be used to \"seed\" services.\n        - Kafka can \"compress\" this topic, because all any \"new\" services would need is the latest version.\n\n\nThese \"Documents\" don't convey any \"intention\", they are just a statement of fact. They can cause a lot of churn.\n\nFor example, we don't care in our application about the \"SupportTech\" property of the \"com.company.software.added\"\nand we sure don't want to have to process that message every time a different support tech is assigned.\n\nSo maybe just do events?\n\nOn Day 1: - we have the \"current\" inventory item. (from a database backup/restore, query, topic, whatever)\nOn Day 2:\n    Operator: InventoryPriceIncreased\n        - SKU: 'eggs'\n        - Version: 2,\n        - increase: .09\n        - newPrice: 2.08\n\n\n        \n\n\n\n\n\n\n\n\n\n\n",
      "fontSize": 20,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 3283,
      "containerId": null,
      "originalText": "In the ordering scenario above we are saying \"Within my world (bounded context) I'm responsible for users placing orders.\nI need some operands to do that. The customers, some inventory, etc. When an order is placed, my service will OWN that order.\n\nIn other words, some data (operands) that you don't own will end up being operated on to create something you do own.\n\n\nOrderCreated (Operation)\n    - Id: \"d80603ef-fb7c-4416-bab5-7f0a3ba0d997\"\n    - Placed: 2023-10-17 8:24:17 AM\n    - Customer: bob-smith\n    - Items: [ {qty: 3, sku: eggs, price: $2}, {qty: 2, sku: bread, price: $1.50}]\n    - Subtotal: $12\n\n\nWe KNOW that this is going to have to turn into an \"OrderShipped\" (or an error).\n\nWe could issue COMMANDS to other services (remember commands have one handler), wait for some kind of response (Event)\nfrom each one, and that is an \"orchestrator\" and it is super tightly coupled.\n\nThis is where we go back to our policy, which says \"An OrderCreated becomes an OrderShipped When\":\n    - The Order Customer Is Approved (sounds like an event!)\n    - The inventory is reconciled \n    - The shipping is arranged\n    - An OrderId is assigned\n    - Etc. etc.\n\nThis is a \"Saga\" - like Game of Thrones, lots of interweaving story lines, all leading up to a (hopefully better) ending.\n\nWhat is our responsibility as the \"Order taking bounded context\"?\n    - Put an event out there - and trust that eventually we will receive the set of events that mean we can call this an \"Order\".\n\n\nSo we publish an \"OrderCreated\" event, and other services can:\n    - Work on it in parallel. \n    - Work on it sequentially.\n    - Be added in without us knowing.\n\nNote: Sagas are sometimes time constrained. You shouldn't start making the TV show until all the books are written. (forced metaphor).\n\n\nWe let each of the participating services (and we shouldn't know who they are) do their own work and state management.\n- This means that they *each* have at least two handlers.\n    - The \"Local Transaction\"\n        - \"I received this event so I am going to change my state thusly\":\n            - \"I am inventory. When an order is created, I will apply my policies, and if good, update the inventory\"\n            - \"I am the billing service. When an order is created I will charge the customer\"\n            - etc. etc.\n        - To orchestrate/sequence the application of these things, they may not all (and probably won't) respond to the \n          \"OrderCreated\" event. For example, you might decide that we aren't going to adjust inventory until the credit card is charged,\n          or vice-versa. \n            - The Inventory Service listens for a \"CustomerOrderCharged\" event. \n                (keep in mind all of this can and will change and our bounded context does not care. Loose Coupling FTW!)\n    - The \"Compensating Activity\"\n        - If there is a rejection from any of the participating services, each service will have to \"backout\" their local transaction.\n        - \"Dang, I already took the items out of inventory, and just heard (Event) that the credit card company rejected the payment\"\n            - Put it \"back\" in inventory.\n            - Sounds easy, and often is, but what if between when the order was placed and when it was rejected, we had other orders\n              we had to reject because of inadequate inventory?\n                - This is \"computer programming\". \n                - Some Ways To Handle This:\n                    - \"Lock\" the data until you get the go-ahead. Probably not sustainable for Shared data (like inventory) but\n                       for user-associated data, it often is. (e.g. I am in the process of changing this insurance policy by adding a \n                        vehicle. I cannot make any other changes to this until it is approved\")\n                    - Re-sequence processing of events. \n                        - \"I just got an order for more eggs, but this other outstanding order took the last dozen. I should know at\n                          X time if the order completed, I will defer this new order until then\" (this is why sagas have time limits)\n                    - Related: you can just retry X mins/seconds/hours in the future. Read: Amazon cancelling an order.\n\nWhat about \"Consistency\"?\n    - The inventory system gets an OrderCreated, and the prices have changed since the order was placed.\n    - Old Skool Transactional Consistency would say \"FAIL!\"\n    - We can have a \"Policy\" for this, for example:\n        - If the price change is within a certain \"window\", we will honor it. \n            - We'd need to know somehow what version of the price list they are working from. \"Versioned Editions\"\n        - If the price promised on the order is lower than the current price, we will honor it. \n        - If the price change on the order is lower than the current price, AND the customer is a \"VIP\", we will honor it.\n\n\n\n\nVersioned Editions:\n\n\"My local reference data for the product with the SKU 'eggs'\" says they cost $1.99 a dozen.\n\nHow will I get \"updates\" if that is mutable data? \n\nOne way:\n    I get a \"document\" event: \n        On Day 1: \n            Operator: \"InventoryItem\" (weird, huh)\n                Operands:\n                    SKU: 'eggs'\n                    Version: 1\n                    price: 1.99\n        On Day 2:\n            Operator: \"InventoryItem\" (weird, huh)\n                Operands:\n                    SKU: 'eggs'\n                    Version: 2\n                    price: 2.08\n\n\nThe operand for anything having to do with IventoryItems is now a \"composite key\" of the SKU and the Version.\n\nThis can get crazy. These are \"State Carried Messages\" - and don't sound like events. \n    - Note: in Event Streaming (e.g. Kafka) these CAN be in a topic that can be used to \"seed\" services.\n        - Kafka can \"compress\" this topic, because all any \"new\" services would need is the latest version.\n\n\nThese \"Documents\" don't convey any \"intention\", they are just a statement of fact. They can cause a lot of churn.\n\nFor example, we don't care in our application about the \"SupportTech\" property of the \"com.company.software.added\"\nand we sure don't want to have to process that message every time a different support tech is assigned.\n\nSo maybe just do events?\n\nOn Day 1: - we have the \"current\" inventory item. (from a database backup/restore, query, topic, whatever)\nOn Day 2:\n    Operator: InventoryPriceIncreased\n        - SKU: 'eggs'\n        - Version: 2,\n        - increase: .09\n        - newPrice: 2.08\n\n\n        \n\n\n\n\n\n\n\n\n\n\n",
      "lineHeight": 1.2,
      "index": "aV",
      "autoResize": true
    }
  ],
  "appState": {
    "gridSize": 20,
    "gridStep": 5,
    "gridModeEnabled": false,
    "viewBackgroundColor": "#ffffff",
    "lockedMultiSelections": {}
  },
  "files": {}
}